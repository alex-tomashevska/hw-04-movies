{"ast":null,"code":"var _jsxFileName = \"/Users/aleksandra/study/react/04/hw-04-movies/src/pages/MoviesPage/index.js\",\n  _s = $RefreshSig$();\n/** @format */\n\nimport { memo, useEffect, useState } from 'react';\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { LoadMoreButton, MovieList, SearchForm } from \"../../components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const MoviesPage = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(() => {\n  _s();\n  const location = useLocation();\n  const {\n    search\n  } = location;\n  const [data, setData] = useState([]);\n  const [input, setInput] = useState(search);\n  const [isLoading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const handlePage = () => setPage(prevPage => prevPage + 1);\n  const handleData = function () {\n    let newData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return setData(prevData => [...prevData, ...newData]);\n  };\n  const handleInput = _ref => {\n    let {\n      target: {\n        value\n      }\n    } = _ref;\n    return setInput(value);\n  };\n  useEffect(() => {\n    if (!input) return;\n    getMovies();\n  }, [input]);\n  const getMovies = () => {\n    setLoading(true);\n    axios.get(search).then(response => {\n      if (search.length !== 0) {\n        handleData(response.data.pathname);\n      } else {\n        handleData();\n      }\n      handlePage();\n    }).catch(console.error).finally(() => setLoading(false));\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    getMovies(true);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      value: input,\n      handleInput: handleInput(),\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MovieList, {\n      movies: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), data.length > 0 && /*#__PURE__*/_jsxDEV(LoadMoreButton, {\n      onClick: getMovies\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true);\n}, \"S67StDe7vKf6IXH1cyZa8HsTbe4=\", false, function () {\n  return [useLocation];\n})), \"S67StDe7vKf6IXH1cyZa8HsTbe4=\", false, function () {\n  return [useLocation];\n});\n_c2 = MoviesPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"MoviesPage$memo\");\n$RefreshReg$(_c2, \"MoviesPage\");","map":{"version":3,"names":["memo","useEffect","useState","useLocation","axios","LoadMoreButton","MovieList","SearchForm","MoviesPage","location","search","data","setData","input","setInput","isLoading","setLoading","page","setPage","handlePage","prevPage","handleData","newData","prevData","handleInput","target","value","getMovies","get","then","response","length","pathname","catch","console","error","finally","handleSubmit","event","preventDefault"],"sources":["/Users/aleksandra/study/react/04/hw-04-movies/src/pages/MoviesPage/index.js"],"sourcesContent":["/** @format */\n\nimport {memo, useEffect, useState} from 'react'\nimport {useLocation} from \"react-router-dom\";\nimport axios from \"axios\";\nimport {LoadMoreButton, MovieList, SearchForm} from \"../../components\";\n\nexport const MoviesPage = memo(() => {\n  const location = useLocation();\n  const { search } = location;\n  \n  const [data, setData] = useState([]);\n  const [input, setInput] = useState(search)\n  const [isLoading, setLoading] = useState(false)\n  const [page, setPage] = useState(1)\n  \n  const handlePage = () => setPage((prevPage) => prevPage+1)\n  const handleData = (newData = []) => setData((prevData) => [...prevData, ...newData])\n  const handleInput = ({target: {value}}) => setInput(value)\n  \n  useEffect(() => {\n    if (!input) return\n    getMovies()\n  }, [input])\n  \n  const getMovies = () => {\n    setLoading(true)\n    \n    axios.get(search)\n      .then((response) => {\n      if(search.length !== 0){\n        handleData(response.data.pathname)\n      } else {\n        handleData()\n      }\n        handlePage()\n      })\n      .catch(console.error)\n      .finally(() => setLoading(false))\n  }\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    \n    getMovies(true)\n    \n  }\n  \n  return(\n    <>\n      <SearchForm value={input} handleInput={handleInput()} handleSubmit={handleSubmit}/>\n      <MovieList movies={data}/>\n      {data.length > 0 && <LoadMoreButton onClick={getMovies} />}\n    </>\n  )\n} )"],"mappings":";;AAAA;;AAEA,SAAQA,IAAI,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAC/C,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,cAAc,EAAEC,SAAS,EAAEC,UAAU,QAAO,kBAAkB;AAAC;AAAA;AAEvE,OAAO,MAAMC,UAAU,iCAAGR,IAAI,SAAC,MAAM;EAAA;EACnC,MAAMS,QAAQ,GAAGN,WAAW,EAAE;EAC9B,MAAM;IAAEO;EAAO,CAAC,GAAGD,QAAQ;EAE3B,MAAM,CAACE,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAACQ,MAAM,CAAC;EAC1C,MAAM,CAACK,SAAS,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACe,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC;EAEnC,MAAMiB,UAAU,GAAG,MAAMD,OAAO,CAAEE,QAAQ,IAAKA,QAAQ,GAAC,CAAC,CAAC;EAC1D,MAAMC,UAAU,GAAG;IAAA,IAACC,OAAO,uEAAG,EAAE;IAAA,OAAKV,OAAO,CAAEW,QAAQ,IAAK,CAAC,GAAGA,QAAQ,EAAE,GAAGD,OAAO,CAAC,CAAC;EAAA;EACrF,MAAME,WAAW,GAAG;IAAA,IAAC;MAACC,MAAM,EAAE;QAACC;MAAK;IAAC,CAAC;IAAA,OAAKZ,QAAQ,CAACY,KAAK,CAAC;EAAA;EAE1DzB,SAAS,CAAC,MAAM;IACd,IAAI,CAACY,KAAK,EAAE;IACZc,SAAS,EAAE;EACb,CAAC,EAAE,CAACd,KAAK,CAAC,CAAC;EAEX,MAAMc,SAAS,GAAG,MAAM;IACtBX,UAAU,CAAC,IAAI,CAAC;IAEhBZ,KAAK,CAACwB,GAAG,CAAClB,MAAM,CAAC,CACdmB,IAAI,CAAEC,QAAQ,IAAK;MACpB,IAAGpB,MAAM,CAACqB,MAAM,KAAK,CAAC,EAAC;QACrBV,UAAU,CAACS,QAAQ,CAACnB,IAAI,CAACqB,QAAQ,CAAC;MACpC,CAAC,MAAM;QACLX,UAAU,EAAE;MACd;MACEF,UAAU,EAAE;IACd,CAAC,CAAC,CACDc,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC,CACpBC,OAAO,CAAC,MAAMpB,UAAU,CAAC,KAAK,CAAC,CAAC;EACrC,CAAC;EACD,MAAMqB,YAAY,GAAIC,KAAK,IAAK;IAC9BA,KAAK,CAACC,cAAc,EAAE;IAEtBZ,SAAS,CAAC,IAAI,CAAC;EAEjB,CAAC;EAED,oBACE;IAAA,wBACE,QAAC,UAAU;MAAC,KAAK,EAAEd,KAAM;MAAC,WAAW,EAAEW,WAAW,EAAG;MAAC,YAAY,EAAEa;IAAa;MAAA;MAAA;MAAA;IAAA,QAAE,eACnF,QAAC,SAAS;MAAC,MAAM,EAAE1B;IAAK;MAAA;MAAA;MAAA;IAAA,QAAE,EACzBA,IAAI,CAACoB,MAAM,GAAG,CAAC,iBAAI,QAAC,cAAc;MAAC,OAAO,EAAEJ;IAAU;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA,gBACzD;AAEP,CAAC;EAAA,QA9CkBxB,WAAW;AAAA,GA8C3B;EAAA,QA9CgBA,WAAW;AAAA,EA8C3B;AAAA,MA/CUK,UAAU;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}